# GROUVE

個人が1からバンドを結成する為のwebアプリケーションです。

様々な条件でユーザーやバンドを検索できる他、スカウト機能によって、ユーザー同士のバンド結成、既存バンドへのメンバー加入、バンド同士の合併等が行えます。

レスポンシブ対応していますので、スマホやタブレットからもご確認可能です。

▼URLはこちら▼
http://portfolio-ryota-matsumoto.herokuapp.com/

# 開発理由
* ##### 一人で音楽を始めるハードルの高さ

# 使用技術
* Ruby 3.0.5
* Ruby on Rails 7.0.4
* Puma 5.6.5
* Docker 20.10.6
* MySQL 8.0
* AWS S3
* CI/CD CircleCI
* RSpec
* Rubocop
* Heroku

# 機能一覧
- ログイン機能(devise)
  - ゲストログイン機能
  - アイコン画像 動画 音声アップロード機能
  - 各種プロフィールの登録-パート、ジャンル選択フォームの表示切替(JQuery)
- パスワードリセット機能(MailGun)
- 検索機能(ransack)
  - 各種条件絞り込み検索
- おすすめ表示機能
  - 各種条件のおすすめユーザー表示
  - 各種条件のおすすめバンド表示
- お気に入り登録・解除機能
  - ユーザー間の登録・解除
  - ユーザー、バンド間の登録・解除
  - お気に入りボタンの非同期での表示切替(turbo-stream)
- スカウト申請機能
  - ユーザー間の申請
  - バンド間の申請
  - ユーザー、バンド間の申請
  - スカウト画面の切り替え(JQuery)
  - スカウト申請ボタンの活性、非活性(JQuery)
- スカウト承認・拒否機能
- バンド設定機能
  - アイコン画像 動画 音声アップロード機能
  - 各種プロフィール登録機能
  - バンドの平均年齢、最高年齢、最低年齢、人数の自動更新
- バンドリーダー機能
  - メンバーのパート編集
  - リーダーの切替
  - バンドメンバーの除名
- メンバー募集作成機能
  - 募集メンバーの条件設定
- 通知機能
  - 未読の通知を絞り込み
  - 通知ごとにリンクを設定
  - 選択した通知の既読-全ての通知の既読
- バンド内チャット機能
- 画像リサイズ(imagemagick, minimagick)
- ページネーション(kaminari)

# テストフレームワーク
- RSpec
  - factories
  - models spec
  - requests spec
  - system spec

# DB設計
* ### ER図
![ER図](https://user-images.githubusercontent.com/95852095/232289771-cc4a3be9-c78c-4882-abda-ee512a7d5c8c.png)


* ### 各種テーブル
| テーブル名   |     定義    |
| --- | ----------- |
| users | ユーザーの登録情報 |
| user_parts | ユーザーが登録している楽器パートの情報 |
| user_genres    | ユーザーが登録している音楽ジャンルの情報 |
| band | バンドの登録情報 |
| band_genres | バンドが登録している音楽ジャンルの情報 |
| band_members | バンドに所属しているユーザーの情報 |
| recruit_members | バンドが募集しているメンバーの情報 |
| scouts | 申請されたスカウトの情報 |
| favorites | お気に入り登録の情報 |
| notifications | ユーザーに届いた通知の情報 |
| chats | バンド内チャットの内容 |


# インフラ構成図
![インフラ構成図](https://user-images.githubusercontent.com/95852095/232289742-2fd1ff26-7b97-44f2-8a8a-c9360dd911c2.png)

# アプリの特徴

# こだわり
* #### 目的がわかりやすいスカウト機能
ユーザー同士、バンド同士、ユーザーからバンド、バンドからユーザー、全ての組み合わせでスカウトを送り合うことができます。
受け手側にはそれらを区別して表示させることで、送り手がユーザーなのかバンドなのか、また自分に対してなのか自分の所属バンドに対してなのかを一目で分かるようにしました。
また、スカウト時に相手のパートや自分の希望パートを指定、簡単なメッセージを送る等が可能な為、バンド結成に必要な最低限の合意事項の確認も併せて行えるようにしました。

* #### バンドを組むことの手軽さを追求
上記のスカウト機能によってバンド結成に至る道筋を出来る限り簡略化しました。
また、バンド結成後はいつでも脱退可能にすることや、アプリ内で連絡を取り合えるようにすることで、バンドを組むことのハードルを下げることを意識しました。

* #### リーダー機能による秩序の維持
バンドからのスカウト申請や、バンドへのスカウトの承認をリーダーのみが行えることで、同内容のスカウトが重複することや、勝手なスカウトの承認が行われないようにしています。
また、バンドメンバーのパート編集や脱退させる権利、リーダー変更権も付与している為、手軽さの中でも最低限の秩序を保てるようにしています。



# 苦労したところ
* #### CircleCiを通したテスト、デプロイの自動化
Docker、CircleCIの環境設定には、制作期間の半分ほどの時間を費やしました。
まず先人達のコードを参考に実装してみて、生じたエラーを一つ一つ解消しながらその都度周辺知識について勉強する、という形で開発を進めていました。
その為、ローカルでの環境とDockerコンテナ内の環境、Circleci上の環境、それぞれがどの部分のどういう記述を元に成り立っているかという全体像を理解するまで非常に時間がかかりました。

* #### DB設計
実装前に細やかなDB設計や要件定義を行っていなかった為、実装中にテーブル設定が二転三転としました。


* #### rails7への対応
rails7での実装に挑戦した為、rails6以前との仕様の違いに何度も躓きました。
deviseがrails7に対応していなかったことや、アセット周りの設定が特に苦労しました。

* #### フロントエンドの開発
学習コストと実装のスピード感を重視し、フロントエンドにはBootstrap5、JQueryを採用しました。
プログラミングスクールではHTML/CSSとjavascriptの基本的な部分しか習っていなかった為、知識のインプット、アプリへの導入、コーディングという工程にかなりの時間を費やしました。
